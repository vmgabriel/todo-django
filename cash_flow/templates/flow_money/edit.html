{% extends 'content.html' %}
{% load static %}
{% load djmoney %}

{% block container %}
    <div class="container" style="margin-top: 3em;">
        <a href="{% url 'cash_flow:home_cash_flow'  %}">
            <i class="material-icons">arrow_back</i>
        </a>

        <div class="card-panel">
            <div class="row" style="display: inline-flex;">
                <h2>New Money Flow</h2>
            </div>

            <form method="post" class="col s12" style="padding-bottom: 2em;">
                {% csrf_token %}
                <div class="row">
                    <div class="input-field col s12">
                        {{ form.description }}
                        <label for="description">{{ form.description.label }}</label>
                        {% if form.description.errors %}
                            {% for error in form.description.errors %}
                                <p style="color: red">{{ error }}</p>
                            {% endfor %}
                        {% endif %}
                    </div>
                    <div class="input-field col s12">
                        {{ form.category }}
                        <label for="category">{{ form.category.label }}</label>
                        {% if form.category.errors %}
                            {% for error in form.category.errors %}
                                <p style="color: red">{{ error }}</p>
                            {% endfor %}
                        {% endif %}
                    </div>
                    <div class="input-field col s12">
                        {{ form.amount }}
                        <label for="amount">{{ form.amount.label }}</label>
                        {% if form.amount.errors %}
                            {% for error in form.amount.errors %}
                                <p style="color: red">{{ error }}</p>
                            {% endfor %}
                        {% endif %}
                    </div>
                    <div class="col s12">
                        {{ form.date_flow }}
                        <label for="date_flow">{{ form.date_flow.label }}</label>
                        <input type="text" class="datepicker" name="date_flow" value="{{ form.date_flow.value }}">
                        {% if form.date_flow.errors %}
                            {% for error in form.date_flow.errors %}
                                <p style="color: red">{{ error }}</p>
                            {% endfor %}
                        {% endif %}
                    </div>
                </div>
                
                <script>
                    document.addEventListener('DOMContentLoaded', () => {
                    const elems = document.querySelectorAll('.datepicker');
                    const instances = M.Datepicker.init(elems, {
                        format: "yyyy-mm-dd"
                    });
                    });
                </script>
                <div class="col s12 right-align">
                    <a href="{% url 'cash_flow:new_category'  %}" class="btn waves-effect waves-red btn-large red">Cancel</a>
                    <button type="submit" class="waves-effect waves-light btn-large">
                        {% if mode == "Save" %}
                            Create
                        {% else %}
                            Edit
                        {% endif %}
                    </button>
                </div>
            </form>
        </div>
    </div>
{% endblock container %}

{% block javascript %}
{% endblock javascript %}